(this.webpackJsonpprueba_d3_idh=this.webpackJsonpprueba_d3_idh||[]).push([[0],{61:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(26),r=n.n(i),s=n(2),d=(n(61),n(62),n(15)),l=n(5),o=n(0),j=function(e){var t=e.title;return Object(o.jsx)("h1",{style:{textAlign:"center"},children:t})},h=function(e){var t=e.xScale,n=e.innerHeight,c=e.innerWidth;return e.isHorizontalBar?t.ticks().map((function(e){return Object(o.jsxs)("g",{className:"tick",transform:"translate(".concat(t(e),",0)"),children:[Object(o.jsx)("line",{y2:n}),Object(o.jsx)("text",{style:{textAnchor:"middle",fontSize:c<=220?"0.6em":c<=250?"0.8em":"1em"},y:n+3,dy:"0.73em",children:e})]},e)})):t.domain().map((function(e){return Object(o.jsx)("g",{className:"tick",children:Object(o.jsx)("text",{transform:"translate(0, ".concat(n,") rotate(-90)"),style:{textAnchor:"end",fontSize:c<=600?"0.6em":c<=740?"0.8em":"1.05em"},dx:"-0.8em",dy:3,y:t(e)+t.bandwidth()/2,children:e})},e)}))},b=function(e){var t=e.yScale,n=e.isHorizontalBar,c=(e.innerHeight,e.innerWidth);return n?t.domain().map((function(e){return Object(o.jsx)("g",{className:"tick",children:Object(o.jsx)("text",{style:{textAnchor:"end"},dy:".32em",x:-3,y:t(e)+t.bandwidth()/2,children:e})},e)})):t.ticks().map((function(e){return Object(o.jsxs)("g",{className:"tick",transform:"translate(0, ".concat(t(e),")"),children:[Object(o.jsx)("line",{x2:c}),Object(o.jsx)("text",{style:{textAnchor:"end",fontSize:c<=220?"0.6em":c<=250?"0.8em":"1em"},x:0,dx:"-0.73em",children:e})]},e)}))},u=function(e){var t=e.data,n=e.yScale,c=e.xScale,a=e.xValue,i=e.yValue,r=e.idValue,s=e.selectedEntity,d=e.isHorizontalBar,l=e.innerHeight;return t.map((function(e){var t=parseInt(r(e))===s;return d?Object(o.jsx)("rect",{className:"mark".concat(t?" selected":""),x:0,y:n(i(e)),width:c(a(e)),height:n.bandwidth(),children:Object(o.jsxs)("title",{children:["Indice de Desarrollo Humano: ",a(e)]})},r(e)):Object(o.jsx)("rect",{className:"mark".concat(t?" selected":""),x:c(a(e)),y:n(i(e)),width:c.bandwidth(),height:l-n(i(e)),children:Object(o.jsxs)("title",{children:["Indice de Desarrollo Humano: ",i(e)]})},r(e))}))},O=n(21);function x(){var e=function(){var e=Object(c.useState)({width:window.innerWidth,height:640}),t=Object(s.a)(e,2),n=t[0],a=t[1];function i(){a({width:window.innerWidth,height:640})}return Object(c.useEffect)((function(){return window.addEventListener("resize",i),i(),function(){return window.removeEventListener("resize",i)}}),[]),n}(),t=e.width,n=e.height,a=Object(c.useState)({top:20,right:t>=1480?140:t>=1e3?80:t>=480?40:20,left:t>=1480?140:t>=1e3?80:60,bottom:t>=480?170:65}),i=Object(s.a)(a,2),r=i[0],d=i[1],l=Object(c.useState)({innerWidth:t-r.left-r.right,innerHeight:n-r.top-r.bottom}),o=Object(s.a)(l,2),j=o[0],h=o[1];return Object(c.useEffect)((function(){d((function(e){var n=Object(O.a)(Object(O.a)({},e),{},{right:t>=1480?140:t>=1e3?80:t>=480?40:20,left:t>=1480?140:t>=1e3?80:60,bottom:t>=480?170:65});return e.right!==n.right?n:r}),[t]),h({innerWidth:t-r.left-r.right,innerHeight:n-r.top-r.bottom})}),[t,n,r]),{graphSize:j,margin:r,windowSize:{width:t,height:n}}}var f=function(e){var t=e.data,n=e.selectedEntity,c=e.selectedYear,a=x(),i=a.graphSize,r=a.margin,s=a.windowSize,d=s.width,j=s.height,O=i.innerWidth,f=i.innerHeight,m=d<=480,g=function(e){return m?e["ISO 3166-2 (3 D\xedgitos)"]:e[c]},p=function(e){return m?e[c]:e.Estado},v=t&&m?Object(l.b)().domain(t.map(g)).range([0,f]).paddingInner(.15):Object(l.c)().domain([0,1]).range([f,0]),y=t&&m?Object(l.c)().domain([0,1]).range([0,O]):Object(l.b)().domain(t.map(p)).range([0,O]).paddingInner(.15);return Object(o.jsx)("svg",{width:d,height:j,children:Object(o.jsxs)("g",{transform:"translate(".concat(r.left,", ").concat(r.top,")"),style:{maxWidth:"1200px"},children:[Object(o.jsx)(h,{xScale:y,innerHeight:f,innerWidth:O,isHorizontalBar:m}),Object(o.jsx)(b,{yScale:v,innerHeight:f,innerWidth:O,isHorizontalBar:m}),m&&Object(o.jsx)("text",{className:"axis-label",x:O/2,textAnchor:"middle",y:f+50,children:"IDH"}),Object(o.jsx)(u,{data:t,xScale:y,yScale:v,xValue:p,yValue:g,idValue:function(e){return e.Id},innerHeight:f,selectedEntity:n,isHorizontalBar:m})]})})},m=n(16),g=n.n(m),p=function(e){var t=e.data,n=e.setData,a=e.entitiesYears,i=e.selectedEntity,r=e.setSelectedEntity,l=e.selectedYear,j=e.setSelectedYear,h=e.sortBy,b=e.setSortBy,u=Object(c.useState)([]),O=Object(s.a)(u,2),x=O[0],f=O[1];Object(c.useEffect)((function(){f(t?t.reduce((function(e,t){return e.push({value:parseInt(t.Id),label:t.Estado}),e}),[]):[])}),[t]);return Object(c.useEffect)((function(){if(0!==h&&t){var e="alphabetically"===h?"Estado":l,c=Object(d.a)(t).sort((function(t,n){return"ascending"===h||"alphabetically"===h?t[e]<n[e]?-1:t[e]>n[e]?1:0:t[e]>n[e]?-1:t[e]<n[e]?1:0}));n((function(e){return JSON.stringify(c)!==JSON.stringify(e)?c:t}))}}),[h,l,t,n]),Object(o.jsxs)("div",{className:"menus-container",children:[Object(o.jsxs)("div",{className:"dropdown-menu",children:[Object(o.jsx)("span",{className:"dropdown-label",children:"Estado:"}),Object(o.jsx)(g.a,{options:x,value:i.value,onChange:function(e){var t=e.value;return r(t)},placeholder:"Selecciona un Estado"})]}),Object(o.jsxs)("div",{className:"dropdown-menu",children:[Object(o.jsx)("span",{className:"dropdown-label",children:"A\xf1o:"}),Object(o.jsx)(g.a,{options:a,value:l.value,onChange:function(e){var t=e.value;return j(t)},placeholder:"Selecciona un A\xf1o"})]}),Object(o.jsxs)("div",{className:"dropdown-menu",children:[Object(o.jsx)("span",{className:"dropdown-label",children:"Ordenar Datos:"}),Object(o.jsx)(g.a,{options:[{label:"Alfabeticamente (A - Z)",value:"alphabetically"},{label:"Ascendente (0 - 1) ",value:"ascending"},{label:"Descendente (1 - 0)",value:"descending"}],value:h.value,onChange:function(e){var t=e.value;return b(t)},placeholder:"Selecciona un Orden"})]})]})},v=function(e){var t=e.selectedEntity,n=e.data,a=e.entitiesYears,i=Object(c.useState)(0),r=Object(s.a)(i,2),d=r[0],l=r[1],j=Object(c.useState)(1),h=Object(s.a)(j,2),b=h[0],u=h[1],O=Object(c.useState)(1),x=Object(s.a)(O,2),f=x[0],m=x[1];return Object(c.useEffect)((function(){var e=n?n.find((function(e){return parseInt(e.Id)===t})):{};if(void 0===e)return null;for(var c=0,i=0,r=1,s=0;s<a.length;s++){var d=a[s];e[d]>i&&(i=e[d]),e[d]<r&&(r=e[d]),c+=e[d]}l(i.toFixed(2)),u(r.toFixed(2)),m((c/a.length).toFixed(2))}),[t,n,a]),Object(o.jsx)("div",{className:"entity-statistics",children:t?Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsx)("tr",{children:Object(o.jsx)("th",{colSpan:"2",children:Object(o.jsx)("h2",{children:"ESTAD\xcdSTICAS"})})})}),Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Promedio IDH"}),Object(o.jsx)("td",{children:f})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"IDH m\xe1s alto"}),Object(o.jsx)("td",{children:d})]}),Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"IDH m\xe1s bajo"}),Object(o.jsx)("td",{children:b})]})]})]})}):""})},y=n(27),S=n.n(y),w=function(){return Object(o.jsx)("div",{className:"loading-container",children:Object(o.jsx)(S.a,{type:"cylon",color:"#137b80",height:"15%",width:"15%"})})};var E=function(){var e=function(){for(var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],i=[];i.length<7;){var r=Math.floor(70*Math.random())+1950;-1===i.indexOf(r)&&i.push(r)}return i=Object(d.a)(i).sort((function(e,t){return e-t})),Object(c.useEffect)((function(){Object(l.a)("https://gist.githubusercontent.com/nykko7/7502eb16b0636c616b07947ac61553d8/raw/609c1e821716d3e64b7baf8fbb9e4546337062ef/Entidades_Mexico.csv",(function(e){return i.forEach((function(t){e[t]=parseFloat(Math.random().toFixed(2))})),e})).then(a)}),[]),[n,a,i]}(),t=Object(s.a)(e,3),n=t[0],a=t[1],i=t[2],r=Object(c.useState)(0),h=Object(s.a)(r,2),b=h[0],u=h[1],O=Object(c.useState)(i),x=Object(s.a)(O,1)[0],m=x[x.length-1],g=Object(c.useState)(m),y=Object(s.a)(g,2),S=y[0],E=y[1],H=Object(c.useState)(0),I=Object(s.a)(H,2),N=I[0],z=I[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(j,{title:"Prueba D3 - \xcdndice de Desarrollo Humano"}),n?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(p,{years:x,data:n,setData:a,selectedEntity:b,setSelectedEntity:u,selectedYear:S,setSelectedYear:E,entitiesYears:x,sortBy:N,setSortBy:z}),Object(o.jsx)(f,{data:n,selectedEntity:b,selectedYear:S}),Object(o.jsx)(v,{selectedEntity:b,data:n,entitiesYears:x})]}):Object(o.jsx)(w,{})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(E,{})}),document.getElementById("root")),H()}},[[66,1,2]]]);
//# sourceMappingURL=main.888d3a3b.chunk.js.map